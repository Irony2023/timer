import tkinter as tk
from tkinter import ttk
import time
import math
import pygame

# Initialize pygame for sound
pygame.init()

# Create the main window
root = tk.Tk()
root.title("Clock Timer")

# Create a canvas for the clock display
canvas = tk.Canvas(root, width=200, height=200, bg="white")  # Set background color to white
canvas.pack()

# Define function to update the timer and move the hands
def update_timer(seconds):
    minutes = seconds // 60
    seconds %= 60
    timer_text.set(f"{minutes:02}:{seconds:02}")
    
    # Calculate hand positions
    second_angle = 360 - (seconds / 60 * 360)  # Angle in degrees
    minute_angle = 360 - (minutes / 60 * 360) - (seconds / 60 * 6)
    
    # Calculate hand lengths and coordinates
    second_hand_length = 80
    minute_hand_length = 60
    
    second_x = 100 + second_hand_length * math.cos(math.radians(second_angle))
    second_y = 100 - second_hand_length * math.sin(math.radians(second_angle))
    minute_x = 100 + minute_hand_length * math.cos(math.radians(minute_angle))
    minute_y = 100 - minute_hand_length * math.sin(math.radians(minute_angle))
    
    # Move the hands
    canvas.coords(second_hand, 100, 100, second_x, second_y)
    canvas.coords(minute_hand, 100, 100, minute_x, minute_y)

# Define function to start the timer
def start_timer():
    total_seconds = 2 * 60  # 2 minutes
    while total_seconds > 0:
        update_timer(total_seconds)
        root.update()
        time.sleep(1)
        total_seconds -= 1
    
    # Play sound
    pygame.mixer.music.load("done_sound.mp3")  # Replace with your sound file
    pygame.mixer.music.play()

# Create a start button
start_button = ttk.Button(root, text="Start", command=start_timer)
start_button.pack()

# Timer text variable
timer_text = tk.StringVar()
timer_label = tk.Label(root, textvariable=timer_text, font=("Helvetica", 24))
timer_label.pack()

# Draw clock face
clock_face = canvas.create_oval(20, 20, 180, 180, width=4, outline="black")

# Clock hands
second_hand = canvas.create_line(100, 100, 100, 20, width=2, fill="red")
minute_hand = canvas.create_line(100, 100, 100, 40, width=4, fill="blue")

# Run the GUI event loop
root.mainloop()
